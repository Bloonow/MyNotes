# Intel x86架构

Intel x86处理器使用复杂指令系统计算机（complex instruction set computer，CISC）架构，这意味着它有适量的专用寄存器（special-purpose register），而不是只有大量的通用寄存器（general-purpose register），这也意味着复杂的专用指令将占主导地位。x86处理器的历史至少可以追溯到8位的Intel 8080处理器，x86指令集中的许多特性都是为了向后兼容8080处理器。

Microsoft Windows32在32位平面模式（flat mode）下使用x86处理器，本文档将只关注平面模式。

x86架构由以下32位的非特权整数寄存器（unprivileged integer register）组成，这些32位寄存器可用作16位或8位的子寄存器。

| 寄存器 | 含义                                              | [15:0] | [15:8] | [7:0] |
| ------ | ------------------------------------------------- | ------ | ------ | ----- |
| eax    | 累加器（accumulator）                             | ax     | ah     | al    |
| ebx    | 基址寄存器（base register）                       | bx     | bh     | bl    |
| ecx    | 计数寄存器（counter register）                    | cx     | ch     | cl    |
| edx    | 数据寄存器（data register）                       | dx     | dh     | dl    |
| esi    | 源索引/变址寄存器（source index register）        | si     |        |       |
| edi    | 目的索引/变址寄存器（destination index register） | di     |        |       |
| ebp    | 基指针寄存器（base pointer register）             | bp     |        |       |
| esp    | 栈指针寄存器（stack pointer register）            | sp     |        |       |

此外，有两个重要的寄存器用于存储处理器的当前状态，即指令指针寄存器（instruction pointer register）和标志寄存器（flag register），名称分别为eip与flags。其中标志寄存器由许多单个位的标志位组成，这些标志位可用于跳转指令（conditional jump instruction），许多指令会修改相应的标志位以描述指令的执行结果。

在x86平台中，不同位长的数据具有不同名称，8位为byte，16位为word，32位为dword，64位为qword，80位为tword，128位为oword。x86平台提供8个128位的SSE寄存器。

# Intel x64架构

x64架构是x86架构的向后兼容扩展（backwards-compatible extension），它提供了64位模式与遗留32位模式，遗留32位模式与x86架构一致。x64架构包括AMD x64与Intel x64，指令集几乎相同。

x64架构将x86架构的8个通用寄存器扩展到64位，并新增了8个64位寄存器，这些寄存器名称以字母`r`开始。

| 寄存器 | [31:0] | [15:0] | [7:0] |
| ------ | ------ | ------ | ----- |
| rax    | eax    | ax     | al    |
| rbx    | ebx    | bx     | bl    |
| rcx    | ecx    | cx     | cl    |
| rdx    | edx    | dx     | dl    |
| rsi    | esi    | si     | sil   |
| rdi    | edi    | di     | dil   |
| rbp    | ebp    | bp     | bpl   |
| rsp    | esp    | sp     | spl   |
| r8     | r8d    | r8w    | r8b   |
| r9     | r9d    | r9w    | r9b   |
| r10    | r10d   | r10w   | r10b  |
| r11    | r11d   | r11w   | r11b  |
| r12    | r12d   | r12w   | r12b  |
| r13    | r13d   | r13w   | r13b  |
| r14    | r14d   | r14w   | r14b  |
| r15    | r15d   | r15w   | r15b  |

输出到低32位子寄存器的操作，会自动对整个64位寄存器执行零扩展（zero-extended），而输出到低16位或低8位子寄存器的操作，不会执行零扩展（与x86行为兼容）。子寄存器ax、bx、cx、dx的高8位仍然可以通过ah、bh、ch、dh进行访问，但不适用于所有类型的操作数。

而且，指令指针寄存器和标志寄存器也扩展到64位，名称分别为rip与rflags。

x64处理器还提供几组浮点寄存器，包括8个80位的x87寄存器，8个64位的MMX寄存器（与x87寄存器重叠），16个128位的SSE寄存器。